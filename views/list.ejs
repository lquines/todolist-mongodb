<%- include("header") -%>

<%#
lodash is used to capitalize the item's first letter.
%>

  <div class="box" id="heading">
    <h1> <%= listTitle %> </h1>
  </div>

  <div class="box">

<%#
  This for loop renders the page of existing items.
  The checkbox value of item.id identifies the records
  to be deleted from the database onChange event.
  The hidden input name is used to provide the List title.
%>

  <%  newListItems.forEach(function(item) { %>

    <form action="/delete" method="post">
      <div class="item">
        <input type="checkbox" name="checkbox" value="<%=item._id%>" onChange="this.form.submit()">
        <p><%= item.name %></p>
      </div>
      <input type="hidden" name="listName" value="<%= listTitle %>"></input>
    </form>
  <%  }) %>

<%#
  Autofocus is set to true for the input text. lowerCase is used to
  convert the string before being saved to the database.
%>

      <form class="item" action="/" method="post">
        <input autofocus="true" type="text" name="newItem" placeholder="New Item" autocomplete="off">
        <button type="submit" name="list" value="<%= _.lowerCase(listTitle) %>">+</button>
      </form>
  </div>

<%- include("footer") -%>
